{"version":3,"sources":["easyzoom.js","product.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5TA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"product.js","sourcesContent":["(function ($) {\n\n    'use strict';\n\n    var dw, dh, rw, rh, lx, ly;\n\n    var defaults = {\n\n        // The text to display within the notice box while loading the zoom image.\n        loadingNotice: 'Loading image',\n\n        // The text to display within the notice box if an error occurs when loading the zoom image.\n        errorNotice: 'The image could not be loaded',\n\n        // The time (in milliseconds) to display the error notice.\n        errorDuration: 2500,\n\n        // Prevent clicks on the zoom image link.\n        preventClicks: true,\n\n        // Callback function to execute when the flyout is displayed.\n        onShow: $.noop,\n\n        // Callback function to execute when the flyout is removed.\n        onHide: $.noop,\n\n        // Callback function to execute when the cursor is moved while over the image.\n        onMove: $.noop\n\n    };\n\n    /**\n     * EasyZoom\n     * @constructor\n     * @param {Object} target\n     * @param {Object} options (Optional)\n     */\n    function EasyZoom(target, options) {\n        this.$target = $(target);\n        this.opts = $.extend({}, defaults, options, this.$target.data());\n\n        this.isOpen === undefined && this._init();\n    }\n\n    /**\n     * Init\n     * @private\n     */\n    EasyZoom.prototype._init = function() {\n        this.$link   = this.$target.find('a');\n        this.$image  = this.$target.find('img');\n\n        this.$flyout = $('<div class=\"easyzoom-flyout\" />');\n        this.$notice = $('<div class=\"easyzoom-notice\" />');\n\n        this.$target.on({\n            'mousemove.easyzoom touchmove.easyzoom': $.proxy(this._onMove, this),\n            'mouseleave.easyzoom touchend.easyzoom': $.proxy(this._onLeave, this),\n            'mouseenter.easyzoom touchstart.easyzoom': $.proxy(this._onEnter, this)\n        });\n\n        this.opts.preventClicks && this.$target.on('click.easyzoom', function(e) {\n            e.preventDefault();\n        });\n    };\n\n    /**\n     * Show\n     * @param {MouseEvent|TouchEvent} e\n     * @param {Boolean} testMouseOver (Optional)\n     */\n    EasyZoom.prototype.show = function(e, testMouseOver) {\n        var w1, h1, w2, h2;\n        var self = this;\n\n        if (!this.isReady) {\n            return this._loadImage(this.$link.attr('href'), function() {\n                if (self.isMouseOver || !testMouseOver) {\n                    self.show(e);\n                }\n            });\n        }\n\n        this.$target.append(this.$flyout);\n\n        w1 = this.$target.width();\n        h1 = this.$target.height();\n\n        w2 = this.$flyout.width();\n        h2 = this.$flyout.height();\n\n        dw = this.$zoom.width() - w2;\n        dh = this.$zoom.height() - h2;\n\n        rw = dw / w1;\n        rh = dh / h1;\n\n        this.isOpen = true;\n\n        this.opts.onShow.call(this);\n\n        e && this._move(e);\n    };\n\n    /**\n     * On enter\n     * @private\n     * @param {Event} e\n     */\n    EasyZoom.prototype._onEnter = function(e) {\n        var touches = e.originalEvent.touches;\n\n        this.isMouseOver = true;\n\n        if (!touches || touches.length == 1) {\n            e.preventDefault();\n            this.show(e, true);\n        }\n    };\n\n    /**\n     * On move\n     * @private\n     * @param {Event} e\n     */\n    EasyZoom.prototype._onMove = function(e) {\n        if (!this.isOpen) return;\n\n        e.preventDefault();\n        this._move(e);\n    };\n\n    /**\n     * On leave\n     * @private\n     */\n    EasyZoom.prototype._onLeave = function() {\n        this.isMouseOver = false;\n        this.isOpen && this.hide();\n    };\n\n    /**\n     * On load\n     * @private\n     * @param {Event} e\n     */\n    EasyZoom.prototype._onLoad = function(e) {\n        // IE may fire a load event even on error so test the image dimensions\n        if (!e.currentTarget.width) return;\n\n        this.isReady = true;\n\n        this.$notice.detach();\n        this.$flyout.html(this.$zoom);\n        this.$target.removeClass('is-loading').addClass('is-ready');\n\n        e.data.call && e.data();\n    };\n\n    /**\n     * On error\n     * @private\n     */\n    EasyZoom.prototype._onError = function() {\n        var self = this;\n\n        this.$notice.text(this.opts.errorNotice);\n        this.$target.removeClass('is-loading').addClass('is-error');\n\n        this.detachNotice = setTimeout(function() {\n            self.$notice.detach();\n            self.detachNotice = null;\n        }, this.opts.errorDuration);\n    };\n\n    /**\n     * Load image\n     * @private\n     * @param {String} href\n     * @param {Function} callback\n     */\n    EasyZoom.prototype._loadImage = function(href, callback) {\n        var zoom = new Image;\n\n        this.$target\n            .addClass('is-loading')\n            .append(this.$notice.text(this.opts.loadingNotice));\n\n        this.$zoom = $(zoom)\n            .on('error', $.proxy(this._onError, this))\n            .on('load', callback, $.proxy(this._onLoad, this));\n\n        zoom.style.position = 'absolute';\n        zoom.src = href;\n    };\n\n    /**\n     * Move\n     * @private\n     * @param {Event} e\n     */\n    EasyZoom.prototype._move = function(e) {\n\n        if (e.type.indexOf('touch') === 0) {\n            var touchlist = e.touches || e.originalEvent.touches;\n            lx = touchlist[0].pageX;\n            ly = touchlist[0].pageY;\n        } else {\n            lx = e.pageX || lx;\n            ly = e.pageY || ly;\n        }\n\n        var offset  = this.$target.offset();\n        var pt = ly - offset.top;\n        var pl = lx - offset.left;\n        var xt = Math.ceil(pt * rh);\n        var xl = Math.ceil(pl * rw);\n\n        // Close if outside\n        if (xl < 0 || xt < 0 || xl > dw || xt > dh) {\n            this.hide();\n        } else {\n            var top = xt * -1;\n            var left = xl * -1;\n\n            this.$zoom.css({\n                top: top,\n                left: left\n            });\n\n            this.opts.onMove.call(this, top, left);\n        }\n\n    };\n\n    /**\n     * Hide\n     */\n    EasyZoom.prototype.hide = function() {\n        if (!this.isOpen) return;\n\n        this.$flyout.detach();\n        this.isOpen = false;\n\n        this.opts.onHide.call(this);\n    };\n\n    /**\n     * Swap\n     * @param {String} standardSrc\n     * @param {String} zoomHref\n     * @param {String|Array} srcset (Optional)\n     */\n    EasyZoom.prototype.swap = function(standardSrc, zoomHref, srcset) {\n        this.hide();\n        this.isReady = false;\n\n        this.detachNotice && clearTimeout(this.detachNotice);\n\n        this.$notice.parent().length && this.$notice.detach();\n\n        this.$target.removeClass('is-loading is-ready is-error');\n\n        this.$image.attr({\n            src: standardSrc,\n            srcset: $.isArray(srcset) ? srcset.join() : srcset\n        });\n\n        this.$link.attr('href', zoomHref);\n    };\n\n    /**\n     * Teardown\n     */\n    EasyZoom.prototype.teardown = function() {\n        this.hide();\n\n        this.$target\n            .off('.easyzoom')\n            .removeClass('is-loading is-ready is-error');\n\n        this.detachNotice && clearTimeout(this.detachNotice);\n\n        delete this.$link;\n        delete this.$zoom;\n        delete this.$image;\n        delete this.$notice;\n        delete this.$flyout;\n\n        delete this.isOpen;\n        delete this.isReady;\n    };\n\n    // jQuery plugin wrapper\n    $.fn.easyZoom = function(options) {\n        return this.each(function() {\n            var api = $.data(this, 'easyZoom');\n\n            if (!api) {\n                $.data(this, 'easyZoom', new EasyZoom(this, options));\n            } else if (api.isOpen === undefined) {\n                api._init();\n            }\n        });\n    };\n\n    // AMD and CommonJS module compatibility\n    if (typeof define === 'function' && define.amd){\n        define(function() {\n            return EasyZoom;\n        });\n    } else if (typeof module !== 'undefined' && module.exports) {\n        module.exports = EasyZoom;\n    }\n\n})(jQuery);\n","$(document).ready(function () {\n    // Instantiate EasyZoom instances\n    var $easyzoom = $('.easyzoom').easyZoom();\n    // Get an instance API\n    var easyzoomAPI = $easyzoom.data(\"easyZoom\");\n\n    $('#star').raty({ number: 5,\n        path: '/images',\n        target     : '#rating',\n        targetType : 'score',\n        targetKeep : true\n    });\n\n    $('.star_review').raty({\n        number: 5,\n        path: '/images',\n        readOnly: true,\n        score: function() {\n            return $(this).attr('data-score');\n        }\n    });\n\n    var big = $(\"#bigfoto img\"),\n        link_for_zoom = $(\".zoom\");\n\n    $(document).on('click','.dop-img-href', function(event){\n        event.preventDefault();\n    });\n\n    $(document).on('mouseover','.dop-img-href', function(event){\n        event.preventDefault();\n        var el = $(this);\n        big.attr({\n            \"src\": $(el)\n                .attr(\"href\")\n        });\n        link_for_zoom.attr({\n            \"href\": $(el)\n                .attr(\"href\")\n        });\n\n        easyzoomAPI.swap($(el).attr(\"href\"), $(el).attr(\"href\"));\n    });\n\n    $('.carousel').slick({\n        slidesToShow: 5,\n        slidesToScroll: 1,\n        autoplay: false\n    });\n\n});\n\n// grid for product carts\nvar dopProduct = $('.dop-product').masonry({\n    itemSelector: '.dop-item'\n});\ndopProduct.imagesLoaded().progress( function() {\n    dopProduct.masonry('layout');\n    $('.dop-product').animate({\n        opacity: 1\n    }, 500 );\n});\n\n$('.modal').scroll(function () {\n\n    var margin = 0;\n\n    if ($(window).width() <= '768'){\n        margin = 0;\n    }else{\n        margin = parseInt($(\".modal-dialog\").css(\"margin-top\")) + parseInt($(\".modal-dialog\").css(\"margin-bottom\"));\n    }\n    if($('.modal-dialog').height() -  $('.modal').height() + margin ==  $('.modal').scrollTop() )\n    {\n\n        $.post($('.dop-product').data('href'),{\n        }).done(function (data) {\n\n            $('.dop-product').append(data.list);\n            console.log(data.list);\n            $('.dop-product').imagesLoaded( function() {\n                window.onmousewheel = function(){ return true; };\n                var msnry = new Masonry( '.dop-product', {\n                    itemSelector: '.dop-item'\n                });\n                $('.ajax-load').animate({\n                    opacity: 1\n                }, 500 );\n            });\n\n        }).fail(function () {\n            console.log('Products could not be loaded.');\n        });\n    }\n});\n\n\n\n$(document).on('click','.zoom', function(event){\n    event.preventDefault();\n});\n\n$(function () {\n    'use strict';\n    // Change this to the location of your server-side upload handler:\n    var url = '/uploadImage/';\n\n    $('#fileupload-rewiev').fileupload({\n        url: url + 'review',\n        dataType: 'json',\n        singleFileUploads : false,\n        acceptFileTypes: /(\\.|\\/)(gif|jpe?g|png)$/i,\n        disableImageResize: /Android(?!.*Chrome)|Opera/\n            .test(window.navigator && navigator.userAgent),\n        done: function (e, data) {\n\n            $.each(data.result.files, function (index, file) {\n                if($('#block-icon-' + file.id).length == 0) {\n                    var node = $('<div/>')\n                        .attr('class', 'menu-image-preview-block col-md-2 col-lg-2 col-xs-6 col-sm-4 menu-preview-icon')\n                        .attr('id', 'block-icon-' + file.id)\n                        .append($('<img/>')\n                            .attr('src', file.name)\n                            .attr('class', 'menu-image-preview-review'))\n                        .append($('<input/>')\n                            .attr('type', 'checkbox')\n                            .attr('name', 'image_review[]')\n                            .attr('value', file.name)\n                            .attr('checked', true)\n                            .attr('class', 'menu-image-preview-checkbox'))\n                        .append($('<button/>')\n                            .attr('type', 'button')\n                            .attr('class', 'delete-icon-btn')\n                            .attr('data-owner-id', file.id)\n                            .attr('data-url', '/deleteImage/review'));\n\n                    node.appendTo('#files');\n                }\n            });\n        },\n        progressall: function (e, data) {\n            var progress = parseInt(data.loaded / data.total * 100, 10);\n            $('#progress .progress-bar').css(\n                'width',\n                progress + '%'\n            );\n        }\n    }).prop('disabled', !$.support.fileInput)\n        .parent().addClass($.support.fileInput ? undefined : 'disabled');\n});"]}